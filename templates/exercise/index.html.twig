{% extends 'base.html.twig' %}

{% block title %}{{ exercise.name }} - Coding Challenge{% endblock %}
{% block titre_page %}{{ exercise.id }} - {{ exercise.name }}{% endblock %}
{% block body %}
    <div class="leaderboard-exercise">
        <p>Classement de l'exercice :</p>
        <table>
            <thead>
                <th>Pseudonyme</th>
                <th>Score total</th>
            </thead>
        
            <tbody>
            {% for user, score in user_scores %}
                <tr>
                    <td> {{ user['username'] }} </td>
                    <td style="text-align:center"> {{ user['score']* exercise.difficulty }} / {{testsCount * exercise.difficulty}} </td>
                </tr>
            {% endfor %}
            </tbody>
        
        </table>
    </div>
    <p>Difficulté : {{ exercise.difficulty }}</p>
    <p>{{ exercise.ApprovedDate|date("d/m/Y") }}</p>
    <p>{{ exercise.description }}</p>

    {% if  app.user %}
        <a href="{{ path('exercise_solving',{id:exercise.id}) }}"><div class="btn btn-primary">Résoudre l'exercice</div></a>
        <i id="led" class="far fa-lightbulb fa-2x" data-toggle="modal" data-target="#exo-help" style="position:absolute;margin-left:1%;"></i>
        <div class="modal" id="exo-help" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content" style="background-color: #2a3238;">
                    <div class="modal-body">
                        <h5 class="modal-title">Aide exercice</h5><br>
                        <p>En cliquant sur le bouton "Résoudre l'exercice", vous allez être redirigé vers une nouvelle page avec un IDE intégré, dans lequel vous
                        pourrez tenter de résoudre l'exercice avec le langage de votre choix (parmi nos langages supportés).</p><br>
                        <button type="button" class="btn btn-primary" data-dismiss="modal" style="float:right">Fermer l'aide</button>
                    </div>
                </div>
            </div>
        </div>
    <script src="{{asset('js/jquery-3.5.1.min.js')}}"></script>
    {% block javascripts %}
    <script>

        $('#led').mouseenter(function() {
        $('#led').removeClass("far").addClass("fas");
    }),
    $('#led').mouseleave(function() {
        $('#led').removeClass("fas").addClass("far");
    })
    </script>
    {% endblock %}
    {% else %}
        <a class='newLink' href="{{ path('app_register') }}">Inscrivez-vouz</a> ou <a class='newLink' href="{{ path('app_login') }}">connectez-vous</a> afin de résoudre l'exercice.
    {% endif %}
{% endblock %}